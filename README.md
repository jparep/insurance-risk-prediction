# Insurance Risk Analysis and Prediction Model

## Overview
This project aims to build an **Insurance Risk Analysis and Prediction Model** using **Random Forest Regression** for predicting insurance charges based on demographic and health-related features. The model is trained, evaluated, and validated using clean and preprocessed datasets. Additionally, a **Flask-based Web API** is developed with a responsive frontend designed using **Tailwind CSS**. The entire application is deployed on **Render** for easy accessibility.

---

## **Table of Contents**
1. [Features](#features)
2. [Datasets](#datasets)
3. [Architecture](#architecture)
4. [Model Development](#model-development)
5. [Flask Web API](#flask-web-api)
6. [Deployment](#deployment)
7. [Installation](#installation)
8. [Usage](#usage)
9. [Future Enhancements](#future-enhancements)
10. [License](#license)

---

## **Features**

- **Data Preprocessing**: Cleans and standardizes raw data, handling missing values and encoding categorical features.
- **Random Forest Regression**: Trained to predict insurance charges.
- **Hyperparameter Tuning**: Optimized using GridSearchCV for improved performance.
- **Model Evaluation**: Provides evaluation metrics such as R-squared, MAE, and MSE.
- **Validation**: Tested with a separate validation dataset without the target variable.
- **Flask API**: Exposes endpoints for:
  - Predicting insurance charges using user inputs.
  - Viewing model and API information.
- **Tailwind CSS**: Responsive frontend for interacting with the API.
- **Deployment**: Hosted on Render for public access.

---

## **Datasets**

### **Training Dataset**
- Path: `data/insurance.csv`
- Contains features:
  - `age`, `bmi`, `children`, `sex`, `region`, `charges`
- **Target Variable**: `charges`

### **Validation Dataset**
- Path: `data/validation_dataset.csv`
- Contains only features (`charges` not included).

---

## **Architecture**

### **Model Development Workflow**
1. **Data Cleaning**:
   - Handles missing and invalid values.
   - Maps categorical variables to standardized values.
2. **Feature Preprocessing**:
   - Numerical: Imputation and scaling.
   - Categorical: Imputation and one-hot encoding.
3. **Model Training**:
   - Random Forest Regression with hyperparameter tuning.
4. **Evaluation**:
   - Metrics: R-squared, Mean Absolute Error (MAE), Mean Squared Error (MSE).
5. **Validation**:
   - Validates model predictions using unseen data.

### **Web API Workflow**
1. **Input**: User submits data via frontend.
2. **Processing**:
   - Input passed through preprocessing pipeline.
   - Prediction generated by the trained model.
3. **Output**:
   - Predicted charges displayed on the frontend.

---

## **Model Development**

- **Libraries Used**:
  - `pandas`, `numpy`, `scikit-learn`, `joblib`
- **Pipeline**:
  - Combines preprocessing (scaling, encoding) with the Random Forest model.
- **Hyperparameter Tuning**:
  - Parameters:
    - `n_estimators`: Number of trees in the forest.
    - `max_depth`: Maximum depth of the tree.
    - `min_samples_split`: Minimum samples required to split a node.
    - `min_samples_leaf`: Minimum samples required to be at a leaf node.
- **Metrics**:
  - R-squared (R²)
  - Mean Absolute Error (MAE)
  - Mean Squared Error (MSE)

---

## **Flask Web API**

### **Endpoints**
- **`/predict`**: Accepts JSON input and returns predicted charges.
- **`/info`**: Provides model and API metadata.
- **`/health`**: Health check endpoint.

### **Frontend**
- Designed using **Tailwind CSS** for:
  - Input forms.
  - Displaying prediction results.
  - Responsive design for mobile and desktop.

---

## **Deployment**

The application is deployed on **Render**. Deployment involves:
1. Building the Flask API.
2. Bundling the frontend with Tailwind CSS.
3. Hosting the app with public access.

**Render Setup**:
- **Environment Variables**:
  - `MODEL_PATH`: Path to the trained model file.
  - `FLASK_ENV`: `production`.
- Deployment URL: [Your Render App URL](https://your-app-name.onrender.com)

---

## **Installation**

### **Prerequisites**
- Python 3.9 or higher
- `pip` package manager
- `virtualenv` for isolated environments

### **Setup**
1. Clone the repository:
   ```  bash
   git clone https://github.com/jparep/insurance-risk-prediction.git
   cd insurance-risk-prediction
   ```

2. Create a virtual environment and activate it:
  ``` bash 
    python3 -m venv venv
    source venv/bin/activate   # On Windows: venv\Scripts\activate
    ```

3. Train the model:
  ``` bash
        python scripts/insurance_risk_prediction.py
      ```

4. Run the Flask API:
``` bash
    python run.py
```

### Frontend Usage

    Enter the required details (age, BMI, children, etc.).
    Submit the form to get the predicted insurance charges.


# Insurance Risk Analysis and Prediction Model

This project aims to build an **Insurance Risk Analysis and Prediction Model** using **Random Forest Regression** for predicting insurance charges based on demographic and health-related features. The model is trained, evaluated, and validated using clean and preprocessed datasets. Additionally, a **Flask-based Web API** is developed with a responsive frontend designed using **Tailwind CSS**. The entire application is deployed on **Render** for easy accessibility.

---

## **Table of Contents**
1. [Features](#features)
2. [Datasets](#datasets)
3. [Architecture](#architecture)
4. [Model Development](#model-development)
5. [Flask Web API](#flask-web-api)
6. [Deployment](#deployment)
7. [Installation](#installation)
8. [Usage](#usage)
9. [Future Enhancements](#future-enhancements)
10. [License](#license)

---

## **Features**

- **Data Preprocessing**: Cleans and standardizes raw data, handling missing values and encoding categorical features.
- **Random Forest Regression**: Trained to predict insurance charges.
- **Hyperparameter Tuning**: Optimized using GridSearchCV for improved performance.
- **Model Evaluation**: Provides evaluation metrics such as R-squared, MAE, and MSE.
- **Validation**: Tested with a separate validation dataset without the target variable.
- **Flask API**: Exposes endpoints for:
  - Predicting insurance charges using user inputs.
  - Viewing model and API information.
- **Tailwind CSS**: Responsive frontend for interacting with the API.
- **Deployment**: Hosted on Render for public access.

---

## **Datasets**

### **Training Dataset**
- Path: `data/insurance.csv`
- Contains features:
  - `age`, `bmi`, `children`, `sex`, `region`, `charges`
- **Target Variable**: `charges`

### **Validation Dataset**
- Path: `data/validation_dataset.csv`
- Contains only features (`charges` not included).

---

## **Architecture**

### **Model Development Workflow**
1. **Data Cleaning**:
   - Handles missing and invalid values.
   - Maps categorical variables to standardized values.
2. **Feature Preprocessing**:
   - Numerical: Imputation and scaling.
   - Categorical: Imputation and one-hot encoding.
3. **Model Training**:
   - Random Forest Regression with hyperparameter tuning.
4. **Evaluation**:
   - Metrics: R-squared, Mean Absolute Error (MAE), Mean Squared Error (MSE).
5. **Validation**:
   - Validates model predictions using unseen data.

### **Web API Workflow**
1. **Input**: User submits data via frontend.
2. **Processing**:
   - Input passed through preprocessing pipeline.
   - Prediction generated by the trained model.
3. **Output**:
   - Predicted charges displayed on the frontend.

---

## **Model Development**

- **Libraries Used**:
  - `pandas`, `numpy`, `scikit-learn`, `joblib`
- **Pipeline**:
  - Combines preprocessing (scaling, encoding) with the Random Forest model.
- **Hyperparameter Tuning**:
  - Parameters:
    - `n_estimators`: Number of trees in the forest.
    - `max_depth`: Maximum depth of the tree.
    - `min_samples_split`: Minimum samples required to split a node.
    - `min_samples_leaf`: Minimum samples required to be at a leaf node.
- **Metrics**:
  - R-squared (R²)
  - Mean Absolute Error (MAE)
  - Mean Squared Error (MSE)

---

## **Flask Web API**

### **Endpoints**
- **`/predict`**: Accepts JSON input and returns predicted charges.
- **`/info`**: Provides model and API metadata.
- **`/health`**: Health check endpoint.

### **Frontend**
- Designed using **Tailwind CSS** for:
  - Input forms.
  - Displaying prediction results.
  - Responsive design for mobile and desktop.

---

## **Deployment**

The application is deployed on **Render**. Deployment involves:
1. Building the Flask API.
2. Bundling the frontend with Tailwind CSS.
3. Hosting the app with public access.

**Render Setup**:
- **Environment Variables**:
  - `MODEL_PATH`: Path to the trained model file.
  - `FLASK_ENV`: `production`.
- Deployment URL: [Your Render App URL](https://your-app-name.onrender.com)

---

## **Installation**

### **Prerequisites**
- Python 3.9 or higher
- `pip` package manager
- `virtualenv` for isolated environments

### **Setup**
1. Clone the repository:
   ```bash
   git clone https://github.com/your-username/insurance-risk-prediction.git
   cd insurance-risk-prediction

    Create a virtual environment and activate it:

python3 -m venv venv
source venv/bin/activate   # On Windows: venv\Scripts\activate

Install dependencies:

pip install -r requirements.txt

Train the model:

python src/train_model.py

Run the Flask API:

    python src/app.py

Usage
API Usage

    Run the Flask server locally:

    python src/app.py

    Access the API:
        Open your browser at http://127.0.0.1:5000/.
        Use /predict endpoint to predict charges.

Frontend Usage

    Enter the required details (age, BMI, children, etc.).
    Submit the form to get the predicted insurance charges.

## Future Enhancements

    1. Add more features for insurance prediction, e.g., medical history, income, etc.
    2. Enhance model explainability using SHAP or LIME.
    3. Add CI/CD pipelines for automated testing and deployment.
    4. Migrate to AWS for scalable deployment with Lambda and API Gateway.
    5. Introduce authentication for API access.

## License

This project is licensed under the (MIT License)[#].